---
import BasicLayout from "@/layouts/BasicLayout.astro";
import { SITE_METADATA } from "@/consts";
import { Github, Twitter, Youtube, Linkedin, Twitch, Globe, Copy, ExternalLink } from "lucide-react";

const title = "Social — " + SITE_METADATA.title.default;
const description = "Follow EncodeEdge on social media — links to GitHub, Twitter, LinkedIn, YouTube, and Mastodon.";

const socials = [
  {
    name: "GitHub",
    url: "https://github.com/atulkrjha",
    handle: "@atulkrjha",
    Icon: Github,
    note: "Source, issues, and contributions.",
    color: "#181717",
  },
  {
    name: "Twitter",
    url: "https://twitter.com/encodeedge",
    handle: "@encodeedge",
    Icon: Twitter,
    note: "Short updates, threads and announcements.",
    color: "#1DA1F2",
  },
  {
    name: "LinkedIn",
    url: "https://www.linkedin.com/company/encodeedge",
    handle: "EncodeEdge",
    Icon: Linkedin,
    note: "Professional announcements and job postings.",
    color: "#0A66C2",
  },
  {
    name: "YouTube",
    url: "https://www.youtube.com/@encodeedge",
    handle: "@EncodeEdge",
    Icon: Youtube,
    note: "Long-form tutorials, walkthroughs and talks.",
    color: "#FF0000",
  },
    {
    name: "Twitch",
    url: "https://www.twitch.tv/encodeedge",
    handle: "@EncodeEdge",
    Icon: Twitch,
    note: "Long-form tutorials, walkthroughs and talks.",
    color: "#6441A4",
  },
  {
    name: "Medium",
    url: "https://medium.com/@encodeedge",
    handle: "@EncodeEdge",
    Icon: null,
    svg: `
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor" aria-hidden="true">
        <path d="M5 3h3l4.5 9L17 3h3v18h-3l-4.5-9L8 21H5V3z" />
      </svg>
    `,
    note: "Long-form tutorials, walkthroughs and case studies.",
    color: "#000000",
  },
];

---

<BasicLayout title={title} description={description}>
  <style>
    .social-card .icon { color: var(--icon-fallback, var(--primary)); transition: color .15s ease, background .15s ease; }
    .social-card .icon-container { background: rgba(0,0,0,0.03); transition: background .15s ease, transform .15s ease; }
    .social-card:hover .icon-container { background: var(--brand); transform: translateY(-2px); }
    .social-card:hover .icon { color: white; }
  </style>

  <div class="flex flex-col gap-6">
    <div>
      <h1 class="text-foreground text-3xl font-semibold">Connect with EncodeEdge</h1>
      <p class="text-muted-foreground mt-3 max-w-2xl">
        Follow our channels for project updates, tutorials, community events,
        and opportunities to collaborate. Click a card to visit a profile, or
        use the quick actions to copy handles.
      </p>
    </div>

    <div class="grid gap-4 grid-cols-1 sm:grid-cols-2 items-stretch">
      {socials.map((s) => (
        <div
          role="link"
          tabindex="0"
          data-href={s.url}
          style={`--brand: ${s.color}`}
          class="social-card group block h-full rounded-2xl border bg-background/50 p-4 transition-transform duration-200 hover:scale-105 hover:shadow-lg cursor-pointer"
        >
          <div class="flex h-full flex-col gap-4 md:flex-row md:items-start">
            <div class="flex-shrink-0">
              <div class="icon-container flex h-12 w-12 items-center justify-center rounded-full transition-colors">
                {s.Icon ? (
                  <s.Icon className="icon h-6 w-6" />
                ) : (
                  <span class="icon h-6 w-6" set:html={s.svg}></span>
                )}
              </div>
            </div>

            <div class="flex flex-1 flex-col justify-between overflow-visible">
              <div>
                <div class="font-medium text-foreground">{s.name}</div>
                <div class="text-sm text-muted-foreground break-words mt-1">{s.handle}</div>
                <p class="text-muted-foreground mt-2 text-sm break-words whitespace-normal">{s.note}</p>
              </div>

              <div class="mt-3 flex gap-1 items-center justify-between">
                <div class="flex gap-2">
                  <button
                    class="inline-flex items-center gap-2 rounded-full border border-muted/30 px-3 py-1 text-sm text-primary bg-transparent hover:bg-primary/10 transition-transform transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-primary/30"
                    type="button"
                    data-copy={s.handle}
                    aria-label={`Copy ${s.name} handle`}
                  >
                    <Copy className="h-4 w-4" />
                    <span>Copy</span>
                  </button>
                  <a
                    href={s.url}
                    class="inline-flex items-center gap-2 rounded-full px-3 py-1.5 text-sm bg-primary text-white shadow-md hover:brightness-95 transition-transform transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-primary/30"
                    target="_blank"
                    rel="noreferrer"
                    aria-label={`Visit ${s.name}`}
                  >
                    <span>Visit</span>
                    <ExternalLink className="h-4 w-4 opacity-90" />
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>

  <script type="module">
    // card open and copy-to-clipboard handlers
    document.addEventListener('click', (e) => {
      const el = e.target;
      // copy button
      const copyBtn = el.closest('[data-copy]');
      if (copyBtn) {
        const value = copyBtn.getAttribute('data-copy');
        if (!value) return;
        navigator.clipboard?.writeText(value).then(() => {
          const orig = copyBtn.innerHTML;
          copyBtn.innerHTML = 'Copied!';
          setTimeout(() => (copyBtn.innerHTML = orig), 1500);
        }).catch(() => {});
        return;
      }

      // card click (open URL) — ignore clicks on inner links
      const card = el.closest('[data-href]');
      const innerLink = el.closest('a');
      if (card && !innerLink) {
        const href = card.getAttribute('data-href');
        if (href) window.open(href, '_blank');
      }
    });

    // keyboard: open focused card on Enter
    document.addEventListener('keydown', (e) => {
      if (e.key !== 'Enter') return;
      const active = document.activeElement;
      if (active && active.hasAttribute && active.hasAttribute('data-href')) {
        const href = active.getAttribute('data-href');
        if (href) window.open(href, '_blank');
      }
    });
  </script>

</BasicLayout>
