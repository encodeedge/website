---
import BaseHead from "@/components/BaseHead.astro";
import { Footer } from "@/components/blocks/footer";
import { Navbar } from "@/components/blocks/navbar";

const { title, description } = Astro.props;
---

<html lang="en">
  <head>
    <BaseHead title={title} description={description} />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@3.0.1/dist/cookieconsent.css" />
    {
      (
        <>            
              <script type="text/partytown" src="https://www.googletagmanager.com/gtag/js?id=G-5WBXFR71Y5"></script>

                <script type="text/partytown">
                    window.dataLayer = window.dataLayer || [];
                    function gtag() {
                    console.log('gtag called:', arguments);
                    dataLayer.push(arguments);
                    }
                    gtag("js", new Date());
                    gtag("consent", "default", {
                        ad_storage: "granted",
                        ad_user_data: "granted",
                        ad_personalization: "granted",
                        analytics_storage: "granted",
                    });

                    gtag("config", "G-5WBXFR71Y5");
                </script>
                <script is:inline>
                    function updateConsents() {
                    console.log('updateConsents called');
                    gtag('consent', 'update', {
                        ad_storage: 'granted',
                        ad_user_data: 'granted',
                        ad_personalization: 'granted',
                        analytics_storage: 'granted',
                        });
                    }
                </script>
        </>
    )}
  </head>
  <body class={`h-screen antialiased`}>
    <Navbar client:only='react' />
    <main class="pt-20">
      <section class="mx-auto max-w-2xl px-4 py-28 lg:pt-44 lg:pb-32">
        <article class="prose prose-lg dark:prose-invert">
          <slot />
        </article>
      </section>
    </main>
    <Footer />
    <script type="module" src="/scripts/cookieconsent-config.js"></script>
  </body>
</html>
